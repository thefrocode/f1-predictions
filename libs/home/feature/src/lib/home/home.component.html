<div class="flex">
  <div class="flex flex-col gap-6 md:gap-2 w-full md:w-2/3 md:mx-4">
    @if(racesStore.status() === 'success'){
    <div
      class="flex flex-row mt-2 rounded-md bg-banner justify-between px-4 md:px-8 gap-4"
    >
      <div class="flex flex-col w-1/2 gap-4 pt-6 pb-6 justify-between">
        @if(active_race()){
        <p class="text-white md:text-xl font-lemon uppercase">
          {{ active_race()?.short_name }}
        </p>
        }@else{
        <p class="text-white md:text-xl font-lemon">ACTIVE RACE LOADING ...</p>
        }
        <div
          class="bg-[#C328C5] rounded-full flex flex-row max-w-fit px-4 py-2 gap-3 items-center"
        >
          <i class="bi bi-calendar2-week text-white"></i>
          @if(active_race()){
          <p
            class="text-3xs self-center text-center text-white font-lemon mb-0"
          >
            {{ active_race()?.fp1_time | date : 'dd MMM' }} -
            {{ active_race()?.race_time | date : 'dd MMM' }}
          </p>
          }@else {
          <p class="text-3xs self-center text-white font-lemon">Mar - Dec</p>

          }
        </div>
      </div>
      <div
        class="px-4 md:py-4 my-6 flex-col flex gap-1 justify-center items-center rounded-md bg-[#C328C5]"
      >
        <p class="font-lemonada text-2xs md:text-sm text-white">
          TEAM LOCK DEADLINE
        </p>

        <teamlock-deadline [race]="active_race()"></teamlock-deadline>
      </div>
    </div>
    }@else {
    <div class="item">
      <ngx-skeleton-loader
        count="1"
        animation="progress-dark"
        appearance="line"
        [theme]="{ background: '#412165', height: '130px' }"
      />
    </div>
    }
    <home-session-times [race]="active_race()"></home-session-times>
    <div class="flex flex-wrap md:flex-nowrap gap-2">
      <div
        class="bg-[#381D57] text-white rounded-lg px-4 pt-4 pb-1 flex flex-col w-full md:3/5"
      >
        <div class="flex justify-between">
          <p class="font-roboto font-semibold self-center">LEAGUES</p>
          @if(authStore.isAuthenticated()){
          <leagues-add [type]="'icon'"></leagues-add>
          }
        </div>
        <div
          class="w-full bg-[#954FEE] opacity-60 rounded-md flex gap-2 px-2 py-2 my-1.5 text-2xs text-white font-lemonada"
        >
          <p class="w-3/5">League Name</p>
          <p class="w-1/5">Pos</p>
          <p></p>
        </div>
        @for(league of home_leagues(); track league){
        <div
          class="w-full rounded-md flex py-2 text-xs font-lemonada shadow text-nowrap"
        >
          <p class="w-3/5 self-center">{{ league.name }}</p>

          @if(league.position){
          <p class="w-1/5 self-center">{{ league.position }}</p>
          <p>Joined</p>
          }@else {
          <p class="w-1/5 self-center">-</p>
          <leagues-join [league]="league"></leagues-join>
          }
        </div>
        }
        <a class="mx-auto mt-2" [routerLink]="'/leagues'">
          <i class="bi bi-chevron-double-down text-2xl text-[#F98AE0]"> </i>
        </a>
      </div>
      @if(predictionsStore.top_teams()){
      <div class="flex flex-col w-2/5 gap-2">
        <div class="bg-white rounded-md p-4">
          <p>Top Overall Team :</p>
          <p>
            Name:
            {{ predictionsStore.top_teams()!['overall_highest_points'].name }}
          </p>
          <p>
            Points:
            {{ predictionsStore.top_teams()!['overall_highest_points'].points }}
          </p>
        </div>
        <div class="bg-white rounded-md p-4">
          <p>Top Team Last Race:</p>
          <p>
            Name:
            {{ predictionsStore.top_teams()!['last_race_highest_points'].name }}
          </p>
          <p>
            Points:
            {{
              predictionsStore.top_teams()!['last_race_highest_points'].points
            }}
          </p>
        </div>
      </div>
      }
    </div>
  </div>
  <!-- <div class="mt-2 mb-4 w-1/3 flex flex-col gap-4">
    <league-players-list></league-players-list>
  </div> -->
</div>
